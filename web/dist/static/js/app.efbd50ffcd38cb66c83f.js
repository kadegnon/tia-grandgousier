webpackJsonp([1],{"+TqX":function(e,t){},"+mBE":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("fZjL"),i=n.n(s),a=n("/5sW"),r=n("sUu7"),o=n("T1ft"),c=n.n(o),u=n("VBop"),l=n("qmnQ"),v=n("nObl"),d=n("gEw7"),p=n("P0NG"),m=n("o69d"),h=(n("3SK0"),{ChatMsg:u,UserChoice:l,AutoComplete:v,NavLinks:m,VinList:n("/xed"),VinDetails:n("Sulu"),Speech2Text:d,Text2Speech:p,"v-select":c.a}),f=n("/ocq"),g=n("//Fk"),_=n.n(g),b=n("mvHQ"),w=n.n(b),$=a.a.http,C=a.a.resource("vino{/id}"),x=localStorage,k=function(e){var t="API_LIST_FOR_"+e.replace(/\//g,"").toUpperCase();return function(e){return x.hasOwnProperty(e)}(t)?_.a.resolve(function(e){return JSON.parse(x.getItem(e))}(t)):$.get(e).then(function(e){var n=e.data;return function(e,t){x.setItem(e,w()(t))}(t,n),n})};var y=n("VBop"),S=n("qmnQ"),V=n("gEw7"),T=function(e,t){return{time:Date.now(),type:t,content:e.trim().replace(/[0-9]+[.]/gi,function(e){return e.substr(0,e.length-1)+","})}},E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=new Date,s=null;do{s=new Date}while(s-n<t);e()},L={components:{ChatMsg:y.default,UserChoice:S.default,s2t:V.default},data:function(){return{maxLimit:150,isLoading:!0,msgs:[],isUserTyping:!1,chatInputMsg:"",autoSpeak:!0,lastMsgSpeak:-1,choice:{},commands:["efface","envoye","envoie","ok","okay","point"]}},created:function(){var e=this;k("ggs/intro").then(function(t){t.forEach(function(t){return E(function(n){return e.msgs.push(T(t,"bot"))})})})},updated:function(){this.scrollToEnd()},computed:{limitChatInputMsg:function(){return this.chatInputMsg.length+"/"+this.maxLimit}},methods:{speak:function(e){var t=this;this.autoSpeak&&e.forEach(function(e){return t.$bus.$emit("t2s-speak",e)})},scrollToEnd:function(){var e=this.$el.querySelector("#msg-list");e.scrollTop=e.scrollHeight},allowMicro:function(e){this.$bus.$emit("msg-warning","Veuillez autoriser l'utilisation du micro")},handleS2Cmd:function(e){switch(console.log("Cmd : ",e),e){case"efface":this.chatInputMsg="";break;case"envoye":case"envoie":case"ok":case"okay":this.sendMsg();break;case"point":case"√† la ligne":this.chatInputMsg+=". "}},handleS2Text:function(e){console.log("Moi : ",e),this.chatInputMsg+=e},sendMsg:function(){var e,t=this,n=T(this.chatInputMsg,"user");this.msgs.push(n),(e=n.content,$.get("ggs/",{params:{question:e}}).then(function(e){return e.data})).then(function(e){var n=e.reponse;return t.handleBotResponse(n)}).then(function(e){t.chatInputMsg="",t.$refs.msgChatInput.focus(),t.speak(e)})},handleBotResponse:function(e){var t=this;if(Array.isArray(e))return e.map(function(e){var n=T(e,"bot");return E(function(e){return t.msgs.push(n)}),n.content});var n=T(e,"bot");return this.msgs.push(n),[n.content]}}},R={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"chat"},[n("a",{staticClass:"switch-btn-speak",attrs:{href:"javascript:;"},on:{click:function(t){e.autoSpeak=!e.autoSpeak}}},[e.autoSpeak?n("span",[e._v("Mute üîá")]):n("span",{attrs:{title:"Ecouter la reponse du bot"}},[e._v("Auto-Speak üîä")])]),e._v(" "),n("h1",[e._v("Bot Chat ")]),e._v(" "),n("transition-group",{ref:"msgList",attrs:{name:"msg-list",id:"msg-list",tag:"ul"}},e._l(e.msgs,function(e){return n("chat-msg",{key:e.time,staticClass:"msg",attrs:{msg:e}})})),e._v(" "),n("div",{staticClass:"chat-msg"},[n("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:e.chatInputMsg,expression:"chatInputMsg",modifiers:{trim:!0}}],ref:"msgChatInput",staticClass:"chat-msg-input",attrs:{name:"chat-msg-input",cols:"50",rows:"5",placeholder:"Entrer ou dicter votre requ√™te !",autofocus:"",maxlength:e.maxLimit},domProps:{value:e.chatInputMsg},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.sendMsg(t)},input:function(t){t.target.composing||(e.chatInputMsg=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),n("s2t",{attrs:{"user-commands":e.commands},on:{"s2t-text":e.handleS2Text,"s2t-command":e.handleS2Cmd,"s2t-permission":e.allowMicro}})],1),e._v(" "),n("span",{attrs:{id:"chat-msg-input-limit"}},[e._v(e._s(e.limitChatInputMsg))])],1)},staticRenderFns:[]};var P=n("VU/8")(L,R,!1,function(e){n("iRPK")},"data-v-11cfe01d",null).exports,M={name:"vins",components:{VinList:n("/xed").default},data:function(){return{list:[],selected:""}},created:function(){this.getListVins(),this.selected=this.$route.params.id,this.$bus.$on("list-of-caracteristic",this.getListOfSelect),this.$bus.$on("vin-details",this.getDetailsVin),this.$bus.$on("vin-add",this.add),this.$bus.$on("vin-modif",this.modif),this.$bus.$on("vin-remove",this.remove)},beforeRouteUpdate:function(e,t,n){this.selected=e.params.id,n()},beforeDestroy:function(){this.$bus.$off(["list-of-caracteristic","list-select","vin-select","vin-details","vin-add","vin-modif","vin-remove"])},methods:{redirectToNewVin:function(e){console.log("[Vins] Adding new vin : ",e),this.$router.push({name:"vinNew",query:{nom:e}})},redirectToVinDetails:function(e){console.log("[Vins] Selected vin #",e),this.selected=e,this.$router.push({name:"vinDetails",params:{id:e}})},getListOfSelect:function(){var e=this,t=function(t){return function(n){return e.$bus.$emit("list-select",[t,n.sort()])}},n=function(t){return function(n){e.$bus.$emit("msg-error","Impossible de recuperer la liste pour les "+t)}},s="appellations";k("appellations/").then(t(s)).catch(n(s)),s="services",k("services/").then(t(s)).catch(n(s)),s="plats",k("plats/").then(t(s)).catch(n(s))},getDetailsVin:function(e){var t=this;(function(e){return C.get({id:e}).then(function(e){return e.body})})(e).then(function(n){return t.$bus.$emit("vin-details#"+e,n)}).catch(function(n){return t.$bus.$emit("msg-error","Impossible de recuperer le vin "+e)})},add:function(e){var t,n=this;console.log("[Vins] New vin : ",e),(t=e,$.post("vino/",t).then(function(e){return e.data})).then(function(e){n.list.push(e),console.log(n.list),n.$bus.$emit("msg-success",e.nom+" ajout√©!"),n.$router.replace({path:"/vins"})}).catch(function(t){return n.$bus.$emit("msg-error","Erreur lors de l'ajout de '"+e.nom+"'")})},modif:function(e,t){var n,s=this;console.log("[Vins] M.A.J. vin #",e),(n=t,$.put("vino/",n).then(function(e){return e.data})).then(function(t){s.selected=null,s.list.splice(s.list.findIndex(function(t){return t.id==e}),1,t),s.$bus.$emit("msg-success","Vin modifi√© !"),s.$router.replace({path:"/vins"})}).catch(function(e){return s.$bus.$emit("msg-error","Erreur lors de la modification !")})},remove:function(e){var t=this;window.confirm("Voulez-vous vraiment supprimer ce vin !?")&&(console.log("[Vins] Remove vin #",e),function(e){return C.delete({id:e})}(e).then(function(n){t.list.splice(t.list.findIndex(function(t){return t.id==e}),1),t.$bus.$emit("msg-warning","Vin supprim√© !")}).catch(function(e){return t.$bus.$emit("msg-error","Erreur lors de la suppression du vin !")}))},getListVins:function(){var e=this;$.get("vino/").then(function(e){return e.data}).then(function(t){return e.list=t}).catch(function(t){return e.$bus.$emit("msg-error","Impossible de recuperer le catalogue des vins")})}}},N={render:function(){var e=this.$createElement,t=this._self._c||e;return t("section",{staticClass:"vins row"},[t("vin-list",{staticClass:"view-list column",attrs:{vins:this.list,selected:this.selected},on:{"vin-new":this.redirectToNewVin,"vin-remove":this.remove,"vin-select":this.redirectToVinDetails}}),this._v(" "),t("router-view",{staticClass:"view-details column",attrs:{name:"details"}})],1)},staticRenderFns:[]};var I=n("VU/8")(M,N,!1,function(e){n("zzK5")},"data-v-61b558e2",null).exports,A=n("Sulu"),q=n("CMTD").members,O={data:function(){return{group:q}}},D={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"about"},[s("h2",[e._v("Team")]),e._v(" "),e._l(e.group,function(t,i){return[s("div",{key:i,staticClass:"column team-member"},[s("img",{staticClass:"avatar",attrs:{src:n("G7Gh"),alt:"Avatar of "+t.username,title:"Avatar of "+t.username}}),e._v(" "),s("div",{staticClass:"info"},[s("h1",[e._v("John Mocky")]),e._v(" "),s("p",{staticClass:"description"},[e._v("Joven negro & Yellow")]),e._v(" "),s("div",{staticClass:"links"},e._l(t.links,function(e,t,n){return s("a",{key:n,attrs:{href:e}},[s("i",{staticClass:"['fa', 'fa-'+name]"})])}))])])]})],2)},staticRenderFns:[]};var U=[{name:"home",path:"/",redirect:"/bot"},{name:"about",path:"/about",component:n("VU/8")(O,D,!1,function(e){n("nMRl")},"data-v-346cae96",null).exports},{name:"bot",path:"/bot",component:P},{path:"/vins",component:I,children:[{path:"new",name:"vinNew",components:{details:A.default}},{path:":id",name:"vinDetails",components:{details:A.default}}]}];a.a.use(f.a);var j=new f.a({mode:"history",routes:U});n("HzVD"),n("J5Y/"),n("pyLb");a.a.use(r.a),n("GVEl"),i()(h).forEach(function(e){return a.a.component(e,h[e])});t.default={router:j}},"/tpk":function(e,t){},"/xed":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={name:"vinList",props:{vins:{type:Array,required:!0},selected:""},data:function(){return{searchInput:""}},computed:{filteredList:function(){var e=this;return this.searchInput?this.vins.filter(function(t){var n=t.nom.toLowerCase().includes(e.searchInput.toLowerCase());return n=n||(""+t.annee).includes(e.searchInput)}):this.vins}},methods:{addVin:function(){this.$emit("vin-new",this.searchInput),this.searchInput=""},selectVin:function(e){this.selected!==e&&this.$emit("vin-select",e)},removeVin:function(e){this.$emit("vin-remove",e)}}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("article",{staticClass:"vinos"},[n("div",{staticClass:"header"},[n("h2",[e._v("Catalogue des vins")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.searchInput,expression:"searchInput",modifiers:{trim:!0}}],staticClass:"vin-search-input",attrs:{type:"text",placeholder:"Chercher un vin",title:"Entrer un nom de vin"},domProps:{value:e.searchInput},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.addVin(t)},input:function(t){t.target.composing||(e.searchInput=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:0==e.filteredList.length,expression:"filteredList.length == 0"}],staticClass:"btn-add",attrs:{title:"Ajouter un nouveau vin"},on:{click:e.addVin}},[e._v("‚úö")])]),e._v(" "),e.filteredList.length>0?n("ul",{staticClass:"vinos-list"},[e._l(e.filteredList,function(t){return[n("li",{key:t.id,class:{"vinos-list-item":!0,selected:t.id===e.selected},on:{click:function(n){n.preventDefault(),n.stopPropagation(),e.selectVin(t.id)}}},[n("span",{staticClass:"btn-remove",attrs:{title:"Supprimer ce vin"},on:{click:function(n){if(n.target!==n.currentTarget)return null;n.stopPropagation(),e.removeVin(t.id)}}},[e._v("‚úñ")]),e._v(" "),n("span",{staticClass:"nom"},[e._v(e._s(t.nom.trim()))])])]})],2):[n("div",{directives:[{name:"show",rawName:"v-show",value:this.searchInput,expression:"this.searchInput"}],staticClass:"link-add",on:{click:e.addVin}},[e._v("Ajouter un nouveau vin "),n("b",[e._v("‚Äú"+e._s(e.searchInput)+"‚Äù ?")])])]],2)},staticRenderFns:[]};var a=n("VU/8")(s,i,!1,function(e){n("sIHx")},"data-v-6d8f1006",null);t.default=a.exports},0:function(e,t){},"3SK0":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n("/5sW");var s={name:"ToastMsg",data:function(){return{msg:"Yello, mon p*t**n de message ! ",type:"info",visible:!1,autoCloseTimeoutID:0}},watch:{type:function(){this.visible=!0}},created:function(){var e=this;this.$bus.$on("msg-info",function(t){return e.display(t)}),this.$bus.$on("msg-warning",function(t){return e.display(t,"warning")}),this.$bus.$on("msg-error",function(t){return e.display(t,"error")}),this.$bus.$on("msg-success",function(t){return e.display(t,"success")})},beforeDestroy:function(){this.$bus.$off(["msg-info","msg-warning","msg-error","msg-success"]),console.log("Destroy comp. ",this.autoCloseTimeoutID),clearInterval(this.autoCloseTimeoutID)},methods:{initAutoClose:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;this.autoCloseTimeoutID=setTimeout(function(){console.log("Toast Autclosed in ",t),e.close()},1e3*t)},close:function(){this.visible=!1,clearInterval(this.autoCloseTimeoutID)},display:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";this.msg=e,this.type=t,this.visible=!0,this.initAutoClose()}}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],class:[e.type],attrs:{id:"toast-msg"}},[n("span",{staticClass:"btn-close",on:{click:e.close}},[e._v("√ó")]),e._v(" "),n("span",[e._v(e._s(e.msg))])])},staticRenderFns:[]};var a=n("VU/8")(s,i,!1,function(e){n("k7D/")},"data-v-7f80e9bb",null);t.default=a.exports},"77sA":function(e,t){e.exports={routes:[{name:"BOT - Grandgousier",to:{name:"bot"}},{name:"Vins",to:"/vins"},{name:"Settings",to:"/settings"}]}},CMTD:function(e,t){e.exports={members:[{name:"",username:"kadegnon",links:{github:"https://github.com/kadegnon",mail:"akad@LIVE.be"},description:"Master Student on Computer Science"},{name:"",username:"nazchris",links:{github:"https://github.com/nazchris",mail:""},description:"Master Student on Computer Science"},{name:"",username:"ARajaona",links:{github:"https://github.com/ARajaona",mail:""},description:"Master Student on Computer Science"}]}},G7Gh:function(e,t,n){e.exports=n.p+"static/img/abuelo.3623cbc.jpg"},GVEl:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"EventBus",function(){return r});var s=n("HSQo"),i=n.n(s),a=n("/5sW"),r=new a.a;i()(a.a.prototype,{$bus:{get:function(){return r}}})},HzVD:function(e,t){e.exports={routes:[{method:"GET",url:"appellations",response:["bordeaux","Vall√©e du rhone et de Languedoc","beaujolais","cognac"]},{method:"GET",url:"circonstances",response:["soir√©e de mariage - dansante","repas de mariage","reception de mariage","banquet","communion","buffet vari√©"]},{method:"GET",url:"couleurs",response:["rose","rouge","blanche"]},{method:"GET",url:"services",response:["poisson","fruits de mer et crustac√©s","Asiatiques","entr√©e","desserts","aperitif","tous"]},{method:"GET",url:"plats",response:["p√¢tes","st nectaire)","pain de viande","paella","osso bucco","onglet √† l'√©chalotte","omelette","navarin d'agneau","moules","moule frites","melon jambon cru","marcassin","magret","lotte","lievre","lasagne","lapin","waterzooi de poulet","waterzooi de poissons","waterzooi","biche","b√©casse","barbecue","bar","assortiment vapeur","asperges","artichauds","agneau"]}]}},"J5Y/":function(e,t){e.exports={routes:[{method:"GET",url:"vino/",response:[{annee:2017,appellation:"",id:"a39631a8",nom:"nope",origin:"Bx",url:"http://192.168.1.42:3030/api/vino/a39631a8"},{annee:1817,appellation:"bordeaux",id:"b224d6f6",nom:"Tour Mocky",origin:"Fr",url:"http://192.168.1.42:3030/api/vino/b224d6f6"},{annee:1897,appellation:"",id:"cf590a5e",nom:"Fourchaumes",origin:"UNamur",url:"http://192.168.1.42:3030/api/vino/cf590a5e"},{annee:1952,appellation:"",id:"c18775cc",nom:"Bouquet du jardin",origin:"Poil",url:"http://192.168.1.42:3030/api/vino/c18775cc"},{annee:1768,appellation:"",id:"ef9e2abe",nom:"Bois de pellouse",origin:"CZ",url:"http://192.168.1.42:3030/api/vino/ef9e2abe"}]},{method:"GET",url:"vino/a39631a8",response:{annee:2017,appellation:"",description:"",htva:45.42,id:"a39631a8",nom:"nope",origine:"Bx",tvac:0,url:"http://192.168.1.42:3030/api/vino/a39631a8"}},{method:"GET",url:"vino/b224d6f6",response:{annee:1817,appellation:"bordeaux",description:"",htva:0,id:"b224d6f6",nom:"Tour Mocky",origine:"",tvac:0,url:"http://192.168.1.42:3030/api/vino/b224d6f6"}}]}},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("Dd8w"),i=n.n(s),a=n("/5sW"),r=n("8+8L"),o=n("o69d"),c=n("3SK0"),u=n("P0NG"),l={name:"App",components:{NavLinks:o.default,ToastMsg:c.default,Text2Speech:u.default}},v={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("nav-links"),this._v(" "),t("toast-msg"),this._v(" "),t("text-2-speech",{attrs:{standalone:"true"}}),this._v(" "),t("router-view")],1)},staticRenderFns:[]};var d=n("VU/8")(l,v,!1,function(e){n("k0Dt")},null,null).exports;a.a.config.productionTip=!1,a.a.use(r.a),a.a.url.options.root=Object({NODE_ENV:"production"}).API_URL;var p=n("+mBE").default;new a.a(i()({el:"#app"},p,{render:function(e){return e(d)}}))},"OP0/":function(e,t){},P0NG:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=window.speechSynthesis,i={name:"text2Speech",props:{standalone:!0,text:{type:String,required:!1}},data:function(){return{isSpeaking:!1,voices:null,rate:1,pitch:1,texts:[]}},created:function(){this.voices=window.speechSynthesis.getVoices().filter(function(e){return e.localService}),this.$bus.$on("t2s-speak",this.addText),this.$bus.$on("t2s-stop",this.cancelSpeak),this.$bus.$on("t2s-cancel",this.stop)},beforeDestroy:function(){this.$bus.$off(["t2s-speak","t2s-cancel"])},methods:{initSpeaker:function(e,t,n){var s=this,i=new SpeechSynthesisUtterance(e);return i.lang="fr-FR",i.pitch=this.pitch,i.rate=this.rate,t&&i.addEventListener("end",function(e){s.$bus.$emit("t2s-done-"+n),s.speak()}),i},addText:function(e,t){this.texts.push({id:t,phrases:e.split(".").map(function(e){return e.trim()}).filter(function(e){return e.length>0})}),this.isSpeaking||this.speak()},cancelSpeak:function(e){var t=this.texts.findIndex(function(t){return t.id===e});t>-1&&this.texts.splice(t,1)},speak:function(){var e=this;if(s.speaking)this.$bus.$emit("msg-info","En cours de lecture !\n Un peu de patience ...");else{this.isSpeaking=!0;for(var t=function(){var t=e.texts.shift(),n=t.phrases.length;e.$bus.$emit("t2s-speaking-"+t.id),t.phrases.forEach(function(i,a){var r=e.initSpeaker(i,a===n-1,t.id);s.speak(r)})};this.texts.length>0;)t();this.isSpeaking=!1}},stop:function(){s.cancel(),this.isSpeaking=!1}}},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.standalone?e._e():n("span",{class:["t2s",e.isSpeaking?"btn-speaking":"btn-speaker"],attrs:{title:e.isSpeaking?"Arreter la lecture":"Lire texte"},on:{click:function(t){e.isSpeaking?e.stop():e.speak()}}})},staticRenderFns:[]};var r=n("VU/8")(i,a,!1,function(e){n("WnQn")},"data-v-0f775c4a",null);t.default=r.exports},RFe6:function(e,t){},Sulu:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("5dBV"),i=n.n(s),a=n("gBtx"),r=n.n(a),o=n("d7EF"),c=n.n(o),u=n("woOf"),l=n.n(u),v={appellations:[],services:[],plats:[]},d={nom:"",annee:2017,origine:"",description:"",appellation:void 0,services:[],plats:[],nez:[],bouche:"",htva:.1,tvac:.2},p={name:"vinDetails",data:function(){return{id:void 0,vin:d}},created:function(){this.$bus.$emit("list-of-caracteristic"),this.$bus.$on("list-select",this.prepareListSelect),"/vins/new"===this.$route.path&&this.$route.query?l()(this.vin,d,this.$route.query):this.getVin(this.$route.params.id)},beforeRouteUpdate:function(e,t,n){"/vins/new"===e.path?(l()(this.vin,d,e.query),this.$el.querySelector("#vnom").focus(),n()):n(this.getVin(e.params.id))},beforeDestroy:function(){this.$bus.$off("list-select"),this.$bus.$off("vin-details#"+this.id),this.vin=null,this.id=null},computed:{getListSelect:function(){return function(e){return v.hasOwnProperty(e)?v[e]:[]}}},methods:{prepareListSelect:function(e){var t=c()(e,2),n=t[0],s=t[1];switch(n){case"plats":v.plats=s;break;case"services":return void(v.services=s);case"appellations":return void(v.appellations=s)}},prepareVin:function(e){l()(this.vin,e,{bouche:e.bouche.join("\n"),description:e.description.join("\n")})},getVin:function(e){e&&(this.id=e,this.$bus.$emit("vin-details",this.id),this.$bus.$on("vin-details#"+this.id,this.prepareVin))},saveVin:function(){var e=this,t=function(t){e.$bus.$emit("msg-warning","Certains informations sont manquantes !")};this.$validator.validateAll().then(function(n){if(!n)return t();var s=e.prepareInput();return e.id?e.$bus.$emit("vin-modif",e.id,s):e.$bus.$emit("vin-add",s)}).catch(t)},prepareInput:function(){return l()({},this.vin,{annee:r()(this.vin.annee),htva:i()(this.vin.htva),tvac:i()(this.vin.tvac),bouche:this.vin.bouche.split("\n"),description:this.vin.description.split("\n")})}}},m={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("article",{staticClass:"vino-details"},[n("h2",[e._v(e._s(e.$route.params.id?"Mise √† jour du":"Ajout de")+" vin")]),e._v(" "),n("form",{attrs:{method:e.id?"PUT":"POST"},on:{submit:function(t){t.preventDefault(),e.saveVin(t)}}},[n("div",{staticClass:"form-group"},[e._m(0),e._v(" "),n("div",{staticClass:"form-control"},[n("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("vnom"),expression:"errors.has('vnom')"}],staticClass:"text-danger"},[e._v("Le nom est requis.")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.vin.nom,expression:"vin.nom"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"form-input":!0,error:e.errors.has("vname")},attrs:{type:"text",id:"vnom",name:"vnom",placeholder:"Nom de vin"},domProps:{value:e.vin.nom},on:{input:function(t){t.target.composing||e.$set(e.vin,"nom",t.target.value)}}})])]),e._v(" "),n("div",{staticClass:"form-group"},[e._m(1),e._v(" "),n("div",{staticClass:"form-control"},[n("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("vappel"),expression:"errors.has('vappel')"}],staticClass:"text-danger"},[e._v("L'appellation est requis")]),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.vin.appellation,expression:"vin.appellation"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"form-input select":!0,error:e.errors.has("vappel")},attrs:{id:"vappel",name:"vappel"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.vin,"appellation",t.target.multiple?n:n[0])}}},[e._l(e.getListSelect("appellations"),function(t,s){return[n("option",{key:s,domProps:{value:t,selected:e.id&&t==e.vin.appellation}},[e._v(e._s(t))])]})],2)])]),e._v(" "),n("div",{staticClass:"form-group"},[e._m(2),e._v(" "),n("div",{staticClass:"form-control"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.vin.origine,expression:"vin.origine"}],class:{"form-input":!0,error:e.errors.has("vorigine")},attrs:{type:"text",id:"vorigine",name:"vorigine",placeholder:"Origine de vin"},domProps:{value:e.vin.origine},on:{input:function(t){t.target.composing||e.$set(e.vin,"origine",t.target.value)}}})])]),e._v(" "),n("div",{staticClass:"form-group"},[e._m(3),e._v(" "),n("div",{staticClass:"form-control"},[n("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("vannee"),expression:"errors.has('vannee')"}],staticClass:"text-danger"},[e._v("L'ann√©e est requis")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.vin.annee,expression:"vin.annee"},{name:"validate",rawName:"v-validate",value:"required|numeric|min:4|max:4",expression:"'required|numeric|min:4|max:4'"}],class:{"form-input":!0,error:e.errors.has("vannee")},attrs:{type:"number",id:"vannee",name:"vannee",step:"1",placeholder:"Ann√©e d'embouteillage du vin",max:(new Date).getFullYear()+1},domProps:{value:e.vin.annee},on:{input:function(t){t.target.composing||e.$set(e.vin,"annee",t.target.value)}}})])]),e._v(" "),n("div",{staticClass:"form-group"},[e._m(4),e._v(" "),n("div",{staticClass:"form-control"},[n("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("vhtva"),expression:"errors.has('vhtva')"}],staticClass:"text-danger"},[e._v("Le prix HTVA est requis")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.vin.htva,expression:"vin.htva"},{name:"validate",rawName:"v-validate",value:"required|decimal:2",expression:"'required|decimal:2'"}],class:{"form-input":!0,error:e.errors.has("vhtva")},attrs:{type:"number",id:"vhtva",name:"vhtva",step:"0.01",placeholder:"Prix H.T.V.A."},domProps:{value:e.vin.htva},on:{input:function(t){t.target.composing||e.$set(e.vin,"htva",t.target.value)}}})])]),e._v(" "),n("div",{staticClass:"form-group"},[e._m(5),e._v(" "),n("div",{staticClass:"form-control"},[n("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("vtvac"),expression:"errors.has('vtvac')"}],staticClass:"text-danger"},[e._v("Le prix TVAC est requis")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.vin.tvac,expression:"vin.tvac"},{name:"validate",rawName:"v-validate",value:"required|decimal:2",expression:"'required|decimal:2'"}],class:{"form-input":!0,error:e.errors.has("vtvac")},attrs:{type:"number",id:"vtvac",name:"vtvac",step:"0.01",placeholder:"Prix T.V.A.C."},domProps:{value:e.vin.tvac},on:{input:function(t){t.target.composing||e.$set(e.vin,"tvac",t.target.value)}}})])]),e._v(" "),n("hr",{staticStyle:{width:"110%",margin:"15px 0"}}),e._v(" "),n("div",{staticClass:"form-group"},[e._m(6),e._v(" "),n("div",{staticClass:"form-control"},[n("v-select",{attrs:{multiple:"",taggable:"",id:"vservices",name:"vservices",placeholder:"Pour quelle service",options:e.getListSelect("services")},model:{value:e.vin.services,callback:function(t){e.$set(e.vin,"services",t)},expression:"vin.services"}},[n("span",{attrs:{slot:"no-options"},slot:"no-options"},[e._v("Ooups ! Service inconnu.")])])],1)]),e._v(" "),n("div",{staticClass:"form-group"},[e._m(7),e._v(" "),n("div",{staticClass:"form-control"},[n("v-select",{attrs:{id:"vplats",name:"vplats",placeholder:"Avec quelle plat",multiple:"",taggable:"",options:e.getListSelect("plats")},model:{value:e.vin.plats,callback:function(t){e.$set(e.vin,"plats",t)},expression:"vin.plats"}},[n("span",{attrs:{slot:"no-options"},slot:"no-options"},[e._v("Ooups ! Plat inconnu.")])])],1)]),e._v(" "),n("div",{staticClass:"form-group"},[e._m(8),e._v(" "),n("div",{staticClass:"form-control"},[n("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("vnez"),expression:"errors.has('vnez')"}],staticClass:"text-danger"},[e._v("Un nez pour ce vin")]),e._v(" "),n("v-select",{attrs:{multiple:"","push-tags":"",taggable:"",id:"vnez",name:"vnez"},model:{value:e.vin.nez,callback:function(t){e.$set(e.vin,"nez",t)},expression:"vin.nez"}},[n("span",{attrs:{slot:"no-options"},slot:"no-options"},[e._v("Aucun nez pour ce vin.")])])],1)]),e._v(" "),n("div",{staticClass:"form-group"},[e._m(9),e._v(" "),n("div",{staticClass:"form-control"},[n("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("vbouche"),expression:"errors.has('vbouche')"}],staticClass:"text-danger"},[e._v("La bouche pour ce vin")]),e._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.vin.bouche,expression:"vin.bouche"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"form-input":!0,error:e.errors.has("vbouche")},staticStyle:{height:"125px"},attrs:{id:"vbouche",name:"vbouche",placeholder:"La bouche du vin."},domProps:{value:e.vin.bouche},on:{input:function(t){t.target.composing||e.$set(e.vin,"bouche",t.target.value)}}})])]),e._v(" "),n("div",{staticClass:"form-group"},[e._m(10),e._v(" "),n("div",{staticClass:"form-control"},[n("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("vdescrip"),expression:"errors.has('vdescrip')"}],staticClass:"text-danger"},[e._v("La description est requis")]),e._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.vin.description,expression:"vin.description"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"form-input":!0},staticStyle:{height:"150px"},attrs:{id:"vdescrip",name:"vdescrip",placeholder:"Description du vin"},domProps:{value:e.vin.description},on:{input:function(t){t.target.composing||e.$set(e.vin,"description",t.target.value)}}})])]),e._v(" "),n("div",{staticClass:"form-group"},[n("input",{staticClass:"btn",attrs:{type:"submit",disabled:e.errors.any()},domProps:{value:e.id?"Modifier":"Sauvegarder"}})])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"form-label"},[t("label",{attrs:{for:"vnom"}},[this._v("Nom")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"form-label"},[t("label",{attrs:{for:"vappel"}},[this._v("Appellation")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"form-label"},[t("label",{attrs:{for:"vorigine"}},[this._v("Origine")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"form-label"},[t("label",{attrs:{for:"vannee"}},[this._v("Ann√©e")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"form-label"},[t("label",{attrs:{for:"vhtva"}},[this._v("H.T.V.A.")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"form-label"},[t("label",{attrs:{for:"vtvac"}},[this._v("T.V.A.C.")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"form-label"},[t("label",{attrs:{for:"vservices"}},[this._v("Service")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"form-label"},[t("label",{attrs:{for:"vplats"}},[this._v("Plats")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"form-label"},[t("label",{attrs:{for:"vnez"}},[this._v("Nez")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"form-label"},[t("label",{attrs:{for:"vbouche"}},[this._v("Bouche")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"form-label"},[t("label",{attrs:{for:"vdescrip"}},[this._v("Description")])])}]};var h=n("VU/8")(p,m,!1,function(e){n("OP0/")},"data-v-6a30c521",null);t.default=h.exports},VBop:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{class:"msg-"+this.msg.type},[n("span",{staticClass:"content"},["bot"===e.msg.type?n("span",{class:["t2s",e.isReading?"btn-reading":"btn-read"],attrs:{title:e.isReading?"Arreter la lecture":"Lire texte"},on:{click:function(t){e.isReading?e.stop():e.speak()}}}):e._e(),e._v("\n    "+e._s(this.msg.content.trim())+"\n  ")])])},staticRenderFns:[]};var i=n("VU/8")({name:"chatMsg",props:["msg"],data:function(){return{isReading:!1}},created:function(){var e=this;this.$bus.$on("t2s-speaking-"+this.msg.time,function(t){return e.isReading=!0}),this.$bus.$on("t2s-done-"+this.msg.time,function(t){return e.isReading=!1})},computed:{cssClass:function(){return"msg-"+this.msg.type}},methods:{speak:function(){this.isReading||this.$bus.$emit("t2s-speak",this.msg.content,this.msg.time)},stop:function(){this.$bus.$emit("t2s-cancel",this.msg.time),this.isReading=!1}}},s,!1,function(e){n("eNuJ")},"data-v-c298c40c",null);t.default=i.exports},WnQn:function(e,t){},eNuJ:function(e,t){},gEw7:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("Gu7T"),i=n.n(s);window.SpeechRecognition=window.SpeechRecognition||window.webkitSpeechRecognition||window.mozSpeechRecognition,window.SpeechGrammarList=window.SpeechGrammarList||window.webkitSpeechGrammarList||window.mozSpeechGrammarList;var a={name:"speech2Text",props:{userCommands:{type:Array,default:[],required:!1}},data:function(){return{hasPermission:!0,speech2Text:null,isRecording:!1,text:"",commands:["arr√™te","fini","stop"].concat(i()(this.$props.userCommands))}},mounted:function(){this.checkPermission(),this.initRecognition()},methods:{setPermission:function(e){this.hasPermission="granted"===e,this.hasPermission||this.$emit("s2t-permission",e)},checkPermission:function(){var e=this;navigator.permissions.query({name:"microphone"}).then(function(t){e.setPermission(t.state),t.onchange=e.setPermission}).catch(function(t){e.setPermission("unknown")})},initRecognition:function(){var e=this,t="#JSGF V1.0; grammar commands; public <cmd> = "+this.commands.join(" | ")+";",n=new SpeechGrammarList;n.addFromString(t,1),this.speech2Text=new window.SpeechRecognition,this.speech2Text.grammars=n,this.speech2Text.interimResults=!1,this.speech2Text.lang="fr-FR",this.speech2Text.onresult=function(t){var n=t.results;e.text=n[0][0].transcript},this.speech2Text.addEventListener("end",function(t){""===e.text||e.isCommand()||e.$emit("s2t-text",e.text+" "),e.isRecording=e.isRecording&&!e.isCommand(!0),e.text="",e.isRecording&&e.speech2Text.start()})},start:function(){this.hasPermission?(this.speech2Text.start(),this.isRecording=!0):this.$emit("s2t-permission")},stop:function(){this.isRecording=!1,this.speech2Text.stop()},isCommand:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.commands.find(function(t){return e.text.includes(t)});if(!n)return!1;switch(n){case"arr√™te":case"fini":case"stop":this.stop();break;default:t&&this.$emit("s2t-command",n)}return!0}}},r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"s2t"},[e.hasPermission?n("div",{class:["btn-micro",e.isRecording?"on":"off"],attrs:{title:e.isRecording?"Arreter l'enregistrement":"Dicter phrase"},on:{click:function(t){e.isRecording?e.stop():e.start()}}}):n("div",{staticClass:"btn-micro blocked",attrs:{title:"Micro non-autoris√©"}})])},staticRenderFns:[]};var o=n("VU/8")(a,r,!1,function(e){n("/tpk")},"data-v-c175cd3c",null);t.default=o.exports},iRPK:function(e,t){},k0Dt:function(e,t){},"k7D/":function(e,t){},kVWQ:function(e,t){},nMRl:function(e,t){},nObl:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={name:"AutoComplete",props:{items:[],isAsync:!1},data:function(){return{isOpen:!1,results:[],search:"",isLoading:!1,arrowCounter:0}},methods:{onChange:function(){this.$emit("input",this.search),this.isAsync?this.isLoading=!0:(this.filterResults(),this.isOpen=!0)},filterResults:function(){var e=this;this.results=this.items.filter(function(t){return t.toLowerCase().indexOf(e.search.toLowerCase())>-1})},setResult:function(e){this.search=e,this.isOpen=!1},onArrowDown:function(e){this.arrowCounter<this.results.length&&++this.arrowCounter},onArrowUp:function(){this.arrowCounter>0&&--this.arrowCounter},onEnter:function(){this.search=this.results[this.arrowCounter],this.isOpen=!1,this.arrowCounter=-1},handleClickOutside:function(e){this.$el.contains(e.target)||(this.isOpen=!1,this.arrowCounter=-1)}},watch:{items:function(e,t){e.length!==t.length&&(this.results=e,this.isLoading=!1)}},mounted:function(){document.addEventListener("click",this.handleClickOutside)},destroyed:function(){document.removeEventListener("click",this.handleClickOutside)}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"autocomplete"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],attrs:{type:"text"},domProps:{value:e.search},on:{input:[function(t){t.target.composing||(e.search=t.target.value)},e.onChange],keyup:[function(t){if(!("button"in t)&&e._k(t.keyCode,"down",40,t.key))return null;e.onArrowDown(t)},function(t){if(!("button"in t)&&e._k(t.keyCode,"up",38,t.key))return null;e.onArrowUp(t)},function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.onEnter(t)}]}}),e._v(" "),n("ul",{directives:[{name:"show",rawName:"v-show",value:e.isOpen,expression:"isOpen"}],staticClass:"autocomplete-results",attrs:{id:"autocomplete-results"}},[e.isLoading?n("li",{staticClass:"loading"},[e._v("\r\n        Loading ...\r\n      ")]):e._l(e.results,function(t,s){return n("li",{key:s,staticClass:"autocomplete-result",class:{"is-active":s===e.arrowCounter},on:{click:function(n){e.setResult(t)}}},[e._v("\r\n        "+e._s(t)+"\r\n      ")])})],2)])},staticRenderFns:[]};var a=n("VU/8")(s,i,!1,function(e){n("kVWQ")},"data-v-53e42d92",null);t.default=a.exports},o69d:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("77sA").routes,i={name:"NavLinks",data:function(){return{routes:s}}},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("nav",{staticClass:"nav-links"},e._l(e.routes,function(t,s){return n("router-link",{key:s,staticClass:"link",attrs:{to:t.to}},[e._v(e._s(t.name))])}))},staticRenderFns:[]};var r=n("VU/8")(i,a,!1,function(e){n("+TqX")},"data-v-4d369139",null);t.default=r.exports},pyLb:function(e,t){e.exports={routes:[{method:"POST",url:"bot/",response:"Merci de m'avoir consult√© !"},{method:"POST",url:"bot/",response:["Je ne sais pas encore !","Je suis en cours de dev"]},{method:"POST",url:"bot/",response:"Un peu de patience"},{method:"GET",url:"appellation",response:["Merci de m'avoir consult√© !","Je suis en cours de devellopment","Un peu de patience"]}]}},qmnQ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"user-choice"},[n("p",{staticClass:"question"},[e._v(e._s(e.choice.question))]),e._v(" "),e._l(e.choice.responses,function(t,s){return n("a",{key:s,staticClass:"response",on:{click:function(n){n.stopPropagation(),n.preventDefault(),e.selectResponse(t)}}},[e._v(e._s(t))])})],2)},staticRenderFns:[]};var i=n("VU/8")({name:"userChoice",props:["choice"],data:function(){return{}},computed:{},methods:{selectResponse:function(e){this.$emit("select-response",e)}}},s,!1,function(e){n("RFe6")},"data-v-d3eb7798",null);t.default=i.exports},sIHx:function(e,t){},zzK5:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.efbd50ffcd38cb66c83f.js.map